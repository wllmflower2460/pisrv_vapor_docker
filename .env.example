# pisrv_vapor_docker
# Vapor edge service calling a model sidecar over HTTP

# =============================================================================
# CORE CONFIGURATION
# =============================================================================

# Feature flags
USE_REAL_MODEL=false  # Set to 'true' to use Hailo sidecar

# Point to the Hailo sidecar (service name in compose)
MODEL_BACKEND_URL=http://hailo-inference:9000/infer

# Timeouts / retries
BACKEND_TIMEOUT_MS=1500
BACKEND_RETRIES=0

# App ports / health
METRICS_PORT=8080
HEALTHZ_GRACE_S=5

# API Key for sessions endpoint
API_KEY=supersecret123

# =============================================================================
# HAILO SIDECAR CONFIGURATION
# =============================================================================

# Hailo model configuration
HEF_PATH=/models/tcn_encoder_v1.0.0.hef  # Path to compiled HEF model file
NUM_MOTIFS=12  # Number of motif classes to output
LOG_LEVEL=info  # Logging level for Hailo sidecar

# Model artifact paths (for volume mounting)
MODELS_PATH=./models  # Directory containing model artifacts
# Alternative: use artifacts from hailo_pipeline repo
# MODELS_PATH=../hailo_pipeline/artifacts

# =============================================================================
# DEPLOYMENT PROFILES
# =============================================================================
# Use docker compose profiles to control deployment:
# 
# GPUSrv (stub mode):
#   docker compose -f docker-compose.yml -f docker-compose.hailo.yml --profile hailo-stub up -d
#
# Pi with Hailo-8 (real device):  
#   docker compose -f docker-compose.yml -f docker-compose.hailo.yml --profile hailo-device up -d